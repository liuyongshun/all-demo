<html>
<head>
</head>
<body>
    <div>web-workers</div>
    <input id="number3"/>
    <input id="result"/>
    <div onclick="crash">崩溃一下</div>
    <script>
    </script>
    <script>
    var justNum = document.querySelector('#number3');
    var result2 = document.querySelector('#result');

    if (!!window.SharedWorker) {
      var myWorker = new SharedWorker("./common.js");

      justNum.onchange = function() {
        myWorker.port.postMessage([justNum.value, justNum.value]);
      }

      myWorker.port.onmessage = function(e) {
        result.value = e.data;
      }
    }


    // 崩溃页面心跳 ================
    // function crash() {
    //   while (true) {}
    // }
    // if (!!window.SharedWorker) {
    //   var myWorker = new SharedWorker("./common.js");
    //   setInterval(function () {
    //     console.log('心跳频率');
    //     myWorker.port.postMessage({
    //       from: 'b',
    //       type: 'running',
    //       data: {}
    //     });
    //   }, 5000);

    //   myWorker.port.onmessage = function(e) {
    //     console.log(e.data);
    //   }
    // }
    </script>
</body>
</html>
